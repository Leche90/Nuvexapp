<div class="container mt-2">
  <div class="row">
    <div class="col">
      <p class="lead text-left text-muted">All orders</p>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <table class="table table-striped table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>Customer Name</th>
            <th>Order ID</th>
            <th>Products Ordered</th>
            <th>Taxes</th>
            <th>Grand Total</th>
          </tr>
        </thead>
        <tbody>
          <% @customers.each do |customer| %>
            <% customer.orders.each do |order| %>
              <tr>
                <td><%= customer.email %></td>
                <td><%= order.id %></td>
                <td>
                  <% order.order_items.each do |item| %>
                    <div><%= item.product.name %> (x<%= item.quantity %>)</div>
                  <% end %>
                </td>
                <td>
                  <div>GST: <%= order.gst %></div>
                  <div>PST: <%= order.pst %></div>
                  <div>HST: <%= order.hst %></div>
                  <div>Total Tax: <%= order.total_tax %></div>
                </td>
                <td>
                  <div>Subtotal: <%= order.total_price - order.total_tax %></div>
                  <div>Total: <%= order.total_price %></div>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
